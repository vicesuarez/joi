/*!
 Realtyna Lightbox Plugin
 @Author Steve M. @ Realtyna UI Department
 @Copyright 2015 Realtyna Inc.
 @license Realtyna Inc.
 @Version 1.9.6.6
 */
(function(c,b,a,d){c._realtyna.fn.lightbox=function(){var q={minWidth:200,minHeight:130,maxWidth:9999,maxHeight:9999,width:800,height:500,title:"",autoSize:true,zIndex:9999,position:"center",showLoading:true,reloadPage:false,clearContent:true,multiple:false,closeOnOverlay:true,loading:{color:"#000"},addTo:"body",overlayClass:"",wrapperClass:"",contentClass:"",closeClass:"",ajaxType:"POST",ajaxDataType:"html",ajaxData:d,ajaxURL:d,cssClasses:{lock:"realtyna-lightbox-lock",overlay:"realtyna-lightbox-overlay",wrap:"realtyna-lightbox-wp",title:"realtyna-lightbox-title",content:"realtyna-lightbox-cnt",close:"realtyna-lightbox-close-btn",error:"realtyna-lightbox-error",ajax:"realtyna-lightbox-ajax",placeholder:"realtyna-lightbox-placeholder",textOnlyWrap:"realtyna-lightbox-text-wrap",textOnlyContainer:"realtyna-lightbox-text-cnt",rightPos:"realtyna-lightbox-right-pos"},effects:{fadeIn:"wpl-fx-fadeIn",fadeOut:"wpl-fx-fadeOut",showOverlay:"wpl-fx-fadeIn",showBox:"wpl-fx-fadeInBottom",hideBox:"wpl-fx-fadeOutBottom"},errors:{notFound:"Selected content not found!",unexpected:"An unexpected error happen. Please try again."},callbacks:{beforeOpen:null,afterOpen:null,afterShow:null,afterClose:null}};var y=this,v=null,i=Realtyna,t=null,u={},J=null,f=null,j=null,x=false,k=false,F=false,H=null,n=null,w=null,E=null,p=null,B=null,M=null,D=null,G=null,r=null,h="inline",e={overlay:"realtyna-js-lightbox-overlay",wrap:"realtyna-js-lightbox-wrapper",content:"realtyna-js-lightbox-content",closeBtn:"realtyna-js-lightbox-close"},s=[];var m=c._realtyna.lightbox.fn={};m._beforeOpen=[];m._afterOpen=[];m._afterShow=[];m._afterClose=[];m.open=function(L){L=L;F=true;u=L.data("realtyna-lightbox-obj-opts");J=u.cssClasses;f=u.effects;j=J.placeholder;s.push(L);o(L,function(){h=z(L);switch(h){case"inline":A(L);break;case"ajax":I(L);break;default:return false}})};m.trigger=function(N){var P=u.callbacks,L=m["_"+N];if(P.hasOwnProperty(N)&&P[N]!==null){L.unshift(P[N])}for(var O=0;O<L.length;++O){L[O].call()}return true};m.getInlineOptions=function(L){if(!L){return false}return i.options2JSON(L)};m._error=function(N,L){M=c("<div/>").text(L).addClass(J.error);M.invisible().appendTo(E);x=true;m.trigger("beforeOpen");l(N);n.unbind("onShow").bind("onShow",function(){M.visible().hide().fadeIn();i.ajaxLoader.hide(p);m.trigger("afterShow");F=false;k=true})};function g(N){var L=N.data("realtyna-lightbox-obj-opts"),O=m.getInlineOptions(N.attr("data-realtyna-lightbox-opts"));return c.extend(true,{},L,O)}function o(L,N){c("html").addClass(J.lock);H=c("<div />").attr("id",e.overlay).addClass(i.getClass(J.overlay,u.overlayClass)).css({zIndex:u.zIndex});n=c("<div />").attr("id",e.wrap).addClass(i.getClass(J.wrap,u.wrapperClass));n.appendTo(H).addClass((u.position=="center")?f.showBox:J.rightPos);w=c("<div />").attr("id",e.closeBtn).addClass(i.getClass(J.close,u.closeClass));w.hide().appendTo(n);E=c("<div />").attr("id",e.content).addClass(i.getClass(J.content,u.contentClass));E.appendTo(n);H.appendTo(u.addTo);C();m.trigger("beforeOpen");l(L);if(u.showLoading){p=i.ajaxLoader.show(n,"normal","center",false,u.loading.color)}N.call()}function l(S){var N=i.getBrowserSizes().browser(),R,Q,L,P;u=g(S);if(x){var O=M.css("position");M.css({position:"absolute"});if(u.autoSize){P=M.not("script, style").eq(0).outerWidth();L=M.not("script, style").eq(0).outerHeight()}else{P=u.width;L=u.height}M.css({position:(O==="static")?"":O});if(u.position=="center"){P=Math.min(P+2,u.maxWidth);L=Math.min(L+2,u.maxHeight);P=Math.max(P,u.minWidth);L=Math.max(L,u.minHeight);R=N.width/2-P/2;Q=Math.max(N.height/2-L/2,40);if(!k){n.animate({left:R,top:Q,width:P,height:L},450);setTimeout(function(){if(L>u.minHeight){L=(u.autoSize)?"auto":L}n.css({height:L});H.css({overflowY:"auto"});n.trigger("onShow");m.trigger("afterOpen")},600)}else{n.css({height:(u.autoSize)?"auto":L,left:R,top:Q,width:P})}}else{if(u.position=="right"){Q=0;if(c("#wpadminbar").length){Q=c("#wpadminbar").outerHeight()}n.css({left:"100%",top:Q,height:(Q===0)?"100%":"calc(100% - "+Q+"px)",width:P}).animate({marginLeft:"-"+P},450);setTimeout(function(){n.trigger("onShow");m.trigger("afterOpen")},600)}}}else{if(u.position=="center"){n.css({width:100,height:100,left:N.width/2-50,top:N.height/2-50})}else{if(u.position=="right"){n.css({width:100,height:"100%",left:"100%",top:0}).animate({marginLeft:-100},100)}}}return true}function z(N){var L;if(typeof N.attr("href")!="undefined"){L=N.attr("href")}else{if(typeof N.attr("data-realtyna-href")!="undefined"){L=N.attr("data-realtyna-href")}else{c._realtyna.lightbox.close()}}if(L.length>0){if(L[0]=="#"){return"inline"}else{return"ajax"}}}function C(){c(H).on("click.realtyna-lightbox",function(N){var L=c(N.target);if(u.closeOnOverlay&&!L.hasClass(J.wrap)&&L.parents("#"+e.wrap).length==0){y.close()}});c(w).on("click.realtyna-lightbox",function(L){L.preventDefault();y.close()});c(b).on("resize.realtyna-lightbox",function(){b.resizeEvt;c(b).on("resize.realtyna-lightbox",function(){clearTimeout(b.resizeEvt);b.resizeEvt=setTimeout(function(){l(t)},250)})});c(a).on("keydown.realtyna-lightbox",function(L){if(u.closeOnOverlay&&(L.which||L.keyCode)===27){L.preventDefault();y.close()}})}function K(){c(b).off("resize.realtyna-lightbox");c(a).off("keydown.realtyna-lightbox")}function A(N){var L=/^#[a-z]+[\w-]*$/gi;G=N.attr("href")||N.attr("data-realtyna-href");if(!L.test(G)){return}B=c(G);if(B.length===0){m._error(N,u.errors.notFound);return}if(!B.data(j)){B.data(j,c('<div class="'+j+'"></div>').insertAfter(B).hide())}B=B.show().invisible().detach();x=true;c(E).append(B);n.bind("onReset",function(){if(c(this).find(B).length){if(u.autoSize){n.height(B.outerHeight())}B.hide().replaceAll(B.data(j)).data(j,false);if(u.clearContent){B.html("")}}});n.bind("onShow",function(){B.visible().hide().fadeIn();w.fadeIn();i.ajaxLoader.hide(p);F=false;k=true;m.trigger("afterShow")});r=setInterval(function(){if(B.html().length>0){clearInterval(r);if(B.children().length==0){B.wrapInner('<div class="'+u.cssClasses.textOnlyContainer+'"/>');B.prepend('<h2 class="'+u.cssClasses.title+'">'+u.title+"</h2>");B.wrapInner('<div class="'+u.cssClasses.textOnlyWrap+'"/>')}if(B.find("."+u.cssClasses.title).length!=0&&B.find("."+u.cssClasses.textOnlyContainer).length==0){B.wrapInner('<div class="'+u.cssClasses.textOnlyContainer+'"/>')}if(B.find("."+u.cssClasses.title).length==0&&B.find("h2").length==0){B.prepend('<h2 class="'+u.cssClasses.title+'">'+u.title+"</h2>")}if(B.find("."+u.cssClasses.textOnlyWrap).length==0){B.wrapInner('<div class="'+u.cssClasses.textOnlyWrap+'"/>')}M=B.children();l(N)}},300)}function I(N){var L=N.attr("data-realtyna-lightbox-data")||{};if(typeof u.ajaxData!="undefined"){L=u.ajaxData}G=N.attr("href")||N.attr("data-realtyna-href");if(typeof u.ajaxURL!="undefined"){G=u.ajaxURL}c.ajax({type:u.ajaxType,dataType:u.ajaxDataType,url:G,data:L,error:function(O,P){m._error(N,u.errors.unexpected)},success:function(O,P){if(P==="success"){B=c("<div/>").addClass(J.ajax).html(O);M=B.children();x=true;m.trigger("beforeOpen");E.append(B.show().invisible());l(N)}}});n.bind("onShow",function(){B.visible().hide().fadeIn();w.fadeIn();i.ajaxLoader.hide(p);F=false;k=true;m.trigger("afterShow")})}this.initialize=function(L,O,N){v=N;if(typeof O!="undefined"&&O){v.each(function(){if(!c(this).data("realtyna-lightbox-obj-opts")){var P=c.extend(true,{},q,L),Q=m.getInlineOptions(c(this).attr("data-realtyna-lightbox-opts"));P=c.extend(true,{},P,Q);c(this).data("realtyna-lightbox-obj-opts",P);c(this).on("click.realtyna-lightbox",function(R){if(!F){R.preventDefault();m.open(c(this),R)}})}})}return this};this.open=function(N,O){var L=O||{};v=i.isQuery(N)?N:c(N);y.initialize(L,true,v);return m.open(v)};this.close=function(){if(x){n.trigger("onReset");x=false;k=false;F=false;m._beforeOpen=[];m._afterOpen=[];m._afterShow=[];m._afterClose=[];c(n).removeClass(f.showBox+" "+u.position);if(u.position=="center"){c(n).addClass(f.hideBox)}else{if(u.position=="right"){c(n).animate({marginleft:0},450)}}c(H).fadeOut(600,function(){K();c(this).remove();m.trigger("afterClose");c("html").removeClass(J.lock);if(u.reloadPage){location.reload()}});return true}return false};this.on=function(O,N){var L="_"+O;if(m.hasOwnProperty(L)){m[L].push(N)}return true}};c._realtyna.lightbox=(function(){var e;return{version:"1.9.6.6",init:function(g,f){if(!g){return false}if(!e){e=new c._realtyna.fn.lightbox();this.open=e.open;this.on=e.on;this.close=e.close}return e.initialize(f,true,g)},initObject:function(){if(!e){e=new c._realtyna.fn.lightbox();this.open=e.open;this.on=e.on;this.close=e.close}return e},open:null,on:null,close:null}})()})(jQuery,window,document);